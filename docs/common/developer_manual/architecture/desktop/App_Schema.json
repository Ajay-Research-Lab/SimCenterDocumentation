{
    "$schema": "http://json-schema.org/draft-04/schema#",
    "description": "Schema for the SimCenter workflow applications.",
    "type": "object",
    "title": "App Schema",
    "properties": {
      "Applications": {
        "type": "object",
        "properties": {
          "UQ": {
            "type": "object",
            "title": "UQ",
            "properties": {
              "Application": { "type": "string" },
              "ApplicationData": {"type": "object", "properties": {} }
            },
            "description": "[incomplete desciption.]",
            "required": [
              "Application",
              "ApplicationData"
            ]
          }
        },
        "required": ["UQ"]
      },
      "EDP": {
        "type": "array",
        "description": "Inputs for the QoI tab.",
        "title": "QoI",
        "items": {
            "type": "object",
            "properties": {
              "name": {
                "type": "string"
              }
            },
            "required": [
              "name"
            ]
          }
      },
      "BuildingApplications": {
        "CSV_to_BIM": {
          "title": "CSV_to_BIM",
          "description": "Parses building source information from CSV and saves into BIM.json files for each building.",
          "properties": {
            "Inputs": {
              "properties":{
                "Min": {"type": "int", "description": "min id of building to obtain BIM for", "default": 1, "location": "configuration file"},
                "Max": {"type": "int", "description": "max id of building to obtain BIM for", "default": 10, "location": "configuration file"},
                "buildingSourceFile": {"type": "path", "description": "path to buildings database file", "default": "input_data/"}
              }
            },
            "Outputs": {
              "properties": {
                "buildingFile": {"type": "string", "description": "name of JSON file containing a dictionary of building information. For each building ID, the application creates a separate BIM file.", "default": "buildingsFile.json"}
              }
            }
          }
        }
      },
      "RegionalEventApplications": {
        "NNE": {
          "title": "Nearest Neighbor Events (NNE)",
          "description": "Assigns events to building site by sampling from nearest neighboring event sites, using coordinate locations.",
          "properties": {
            "Inputs": {
              "properties": {
                "eventGrid": {"type": "path", "description": "path to file containing location information on each event file", "default": "input_data/records/"},
                "samples": {"type": "int", "description": "number of event samples to assign to each building", "default": 1, "location": "configuration file"},
                "neighbors": {"type": "int", "description": "number of neighboring event sites to sample from", "default": 1, "location": "configuration file"}
              }
            },
            "Outputs": {
              "properties": {
                "buildingFile": {"type": "string", "description": "name of JSON file containing a dictionary of building information, with event information added.", "default": "buildingsFile.json"}
              }
            }
          },
          "uqType": {
            "type": "string",
            "title":"Dakota Method Category"
          },
          "samplingMethodData": {
            "type": "object",
            "title": "Forward Propagation",
            "properties": {
              "method":  {"type": "string" , "title": "Method"},
              "samples": {"type": "integer", "title": "Samples"},
              "seed":    {"type": "integer", "title": "Seed"}
            }
          },
          "reliabilityMethodData": {
            "type": "object",
            "title": "Reliability Analysis",
            "properties":{
              "integrationMethod": {"type": "string", "title": "Integration Method"},
              "levelType":         {"type": "string", "title": "Level Type"},
              "localMethod":       {"type": "string", "title": "Local Method"},
              "method":            {"type": "string", "title": "Reliability Method"},
              "mpp_Method":        {"type": "string", "title": "MPP Search Method"},
              "probabilityLevel":  {"type": "array" , "title": "Probability Levels"}
            }
          },
          "bayesianCalibrationMethodData": {
            "type": "object",
            "title": "Inverse Problem",
            "properties": {
              "burnInSamples": {"type": "number", "title": "No. Burn in Samples"},
              "chainSamples":  {"type": "number", "title": "No. Chain Samples"},
              "chains":        {"type": "number", "title": "No. Chains"},
              "jumpStep":      {"type": "number", "title": "Jump Step"},
              "method":        {"type": "string", "title": "DREAM"},
              "seed":          {"type": "number", "title": "Seed"}
            }
          },
          "calibrationMethodData": {
            "type": "object",
            "description": "Input data for **Parameter Estimation**.",
            "properties": {
              "convergenceTol": {"type": "number", "title": "Convergence Tol", "description": "Convergence tolerance."},
              "factors":        {"type": "number", "title": "Scaling Factors"},
              "maxIterations":  {"type": "number", "title": "Max No. Iterations"},
              "method":         {"type": "string", "title": "Method"}
            }
          }
        },
        "required": [
          "uqEngine",
          "uqType"
        ],
        "options": [
          "samplingMethodData",
          "reliabilityMethodData",
          "bayesianCalibrationMethodData",
          "calibrationMethodData"
        ]
      },
      "fem": {
        "type": "object",
        "description": "Inputs for the FEM tab.",
        "title": "FEM tab",
        "properties": {
          "dir": {
            "type": "string"
          },
          "inputFile": {
            "type": "string",
            "title":"Input File"
          },
          "mainInput": {
            "type": "string"
          },
          "mainPostprocessScript": {
            "type": "string",
            "description": "Path to post-processing script."
          },
          "numInputs": {
            "type": "integer"
          },
          "parametersFile": {
            "type": "string"
          },
          "parametersScript": {
            "type": "string"
          },
          "postprocessScript": {
            "type": "string"
          },
          "program": {
            "type": "string"
          }
        },
        "required": [
          "dir",
          "inputFile",
          "mainInput",
          "mainPostprocessScript",
          "numInputs",
          "parametersFile",
          "parametersScript",
          "postprocessScript",
          "program"
        ]
      },
      "localAppDir": {
        "type": "string",
        "description": "[incomplete]"
      },
      "python":  {"type": "string"},
      "randomVariables": {
        "type": "array",
        "title": "RV tab",
        "items": {
          "type": "object",
          "properties": {
            "distribution":  {"type": "string" },
            "name":          {"type": "string" },
            "refCount":      {"type": "integer"},
            "stdDev":        {"type": "number" },
            "value":         {"type": "string" },
            "variableClass": {"type": "string" }
          },
          "required": [
            "distribution",
            "name",
            "refCount",
            "value",
            "variableClass"
          ]
        }
      },
      "remoteAppDir":  {"type": "string"},
      "uqResults":     {"type": "object", "properties":{}},
      "workingDir":    {"type": "string"}
    },
    "required": [
      "Applications",
      "EDP",
      "UQ_Method",
      "fem",
      "localAppDir",
      "python",
      "randomVariables",
      "remoteAppDir",
      "uqResults",
      "workingDir"
    ]
  }
